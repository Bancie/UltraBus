@startuml
title SSD for Delete Driver Use Case

actor "Quản lý" as Manager
participant ":System" as System

Manager -> System: clickDeleteButton()
activate System
System -> System: showConfirmDialog()
System --> Manager: Hiển thị thông báo xác nhận:\n"Bạn có chắc chắn muốn xóa tài xế này?\nHành động này không thể hoàn tác."

alt [Quản lý nhấn "Hủy"]
    Manager -> System: clickCancel()
    System -> System: closeConfirmDialog()
    System --> Manager: AlertDialog đã đóng
    deactivate System
else [Quản lý xác nhận xóa]
    Manager -> System: confirmDelete(driverId)
    System -> System: removeDriver(driverId)
    
    alt [Tài xế không tồn tại]
        System --> Manager: Exception: "Driver with id {id} does not exist"
        System --> Manager: Lỗi: "Không thể xóa tài xế"
        deactivate System
    else [Có lỗi trong quá trình xóa]
        System --> Manager: Thông báo lỗi và không xóa tài xế
        deactivate System
    else [Xóa thành công]
        System -> System: deleteDriver(driverId)
        System -> System: updateDriverList()
        System -> System: updateStatistics()
        System --> Manager: Xác nhận xóa tài xế thành công
        System -> System: closeConfirmDialog()
        System -> System: closeEditDialog()
        System -> System: resetForm()
        System -> System: clearEditingDriverId()
        System --> Manager: Dialog đã đóng
        deactivate System
    end
end

@enduml

