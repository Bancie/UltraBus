@startuml
title SSD for Delete Assignment Use Case

actor "Quản lý" as Manager
participant ":System" as System

Manager -> System: clickDeleteButton()
activate System
System -> System: showConfirmDialog()
System --> Manager: Hiển thị thông báo xác nhận:\n"Bạn có chắc chắn muốn xóa phân công này?\nHành động này không thể hoàn tác."

alt [Quản lý nhấn "Hủy"]
    Manager -> System: clickCancel()
    System -> System: closeConfirmDialog()
    System --> Manager: AlertDialog đã đóng
    deactivate System
else [Quản lý xác nhận xóa]
    Manager -> System: confirmDelete(assignmentId)
    System -> System: removeAssign(assignmentId)
    
    alt [Phân công không tồn tại]
        System --> Manager: Exception: "Assignment with id {id} does not exist"
        System --> Manager: Lỗi: "Không thể xóa phân công"
        deactivate System
    else [Có lỗi trong quá trình xóa]
        System --> Manager: Thông báo lỗi và không xóa phân công
        deactivate System
    else [Xóa thành công]
        System -> System: deleteAssignment(assignmentId)
        System -> System: updateAssignmentsList()
        System --> Manager: Xác nhận xóa phân công thành công
        System -> System: closeConfirmDialog()
        System -> System: closeEditDialog()
        System -> System: resetForm()
        System --> Manager: Dialog đã đóng
        deactivate System
    end
end

@enduml

